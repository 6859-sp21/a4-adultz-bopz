{"version":3,"sources":["Bubbles.js","utils/data-transform.js","utils/d3-config.js","steps/BubbleStep.js","gifs/demo0.gif","gifs/demo1.gif","gifs/demo2.gif","gifs/demo3.gif","steps/StorySteps.js","App.js","index.js"],"names":["svg","view","label","node","focus","genRawData","a","d3","genNestedData","csvData","groupedByArtist","Array","from","d","ogArtist","map","item","groupedByBadword","badword","word","groupedBySong","songName","song","groupedByLyric","ogLyric","uniqueLyricGroup","firstUniqueEntry","kbLyric","compareLyrics","kbLyricHTML","ogLyricHTML","name","children","genArtists","artistList","artist","value","type","sort","b","localeCompare","ogLyricParsed","split","ogLyricObj","convertArrayToJSON","getFormattedOGLyricAsHTML","kbLyricParsed","getFormattedKBLyricAsHTML","punctuationless","s","replace","toLowerCase","arr","Object","assign","k","ogLyricWordArray","ogWord","includes","join","ogLyricWordObj","kbLyricWordArray","prev","kbWord","i","undefined","prefix","suffix","length","width","scale1","domain","scale2","scale3","color","Bubbles","songOrArtist","setSongOrArtist","shouldFocus","useState","root","setRoot","d3Container","useRef","updateArtistTitle","shouldUpdate","artistSelected","wordSelected","songSelected","depth","VIEW_ALL_OPTION","data","parent","style","text","shouldShowLabel","r","zoomTo","v","attr","x","y","zoom","event","transition","duration","altKey","tween","t","filter","this","display","on","useEffect","res","size","padding","sum","count","fetchData","closeLyrics","remove","current","height","append","feMerge","selectAll","descendants","slice","e","target","pageX","pageY","generateLyricPopup","stopPropagation","document","addEventListener","handleEscape","removeEventListener","key","innerHTML","child","generateLyricRow","songTitle","releasedYear","year","html","newFocus","className","id","ref","customStyles","control","base","backgroundColor","border","borderRadius","borderBottom","boxShadow","placeholder","singleValue","indicatorSeparator","dropdownIndicator","input","menu","option","state","fontSize","isSelected","isFocused","BubbleStep","artists","setArtists","artistRes","autoFocus","options","onChange","styles","IntroStep","Step2a","src","Demo0","Step2b","Demo1","Step2c","Demo2","Step2d","Demo3","App","currentStepIndex","setCurrentStepIndex","onStepEnter","opacity","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5ed13f56.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport { genNestedData } from \"./utils/data-transform\";\nimport { width, height, pack } from \"./utils/d3-config.js\";\nimport { VIEW_ALL_OPTION } from \"./App\";\nimport \"./Bubbles.css\";\n\nconst scale1 = d3\n  .scaleSequential(d3.interpolate(\"#00875A\", \"#ABF5D1\"))\n  .domain([0, 30]);\nconst scale2 = d3\n  .scaleSequential(d3.interpolate(\"#00B8D9\", \"#B3F5FF\"))\n  .domain([2, 8]);\nconst scale3 = d3\n  .scaleSequential(d3.interpolate(\"#C054BE\", \"#E1C7E0\"))\n  .domain([0, 8]);\n\n// TODO: Create scale 4\nconst color = [null, scale1, scale2, scale3, scale3];\n\nlet svg, view, label, node, focus;\n\nconst Bubbles = ({ songOrArtist, setSongOrArtist, shouldFocus }) => {\n  const [root, setRoot] = useState(null);\n\n  const d3Container = useRef(null);\n\n  // don't call setSongOrArtist if title update is due to props change\n  const updateArtistTitle = (d, shouldUpdate) => {\n    let artistSelected;\n    let wordSelected;\n    let songSelected;\n\n    if (d.depth === 0) {\n      // artist level\n      if (shouldUpdate) setSongOrArtist(VIEW_ALL_OPTION);\n    } else if (d.depth === 1) {\n      // bad word level\n      if (shouldUpdate) {\n        setSongOrArtist({\n          value: d.data.name,\n          label: d.data.name,\n          type: \"artist\",\n        });\n      }\n      artistSelected = \"Artist: \" + d.data.name;\n      wordSelected = `Words altered in Kidz Bop songs by ${d.data.name}`;\n    } else if (d.depth === 2) {\n      // song level\n      artistSelected = \"Artist: \" + d.parent.data.name;\n      wordSelected = \"Word: \" + d.data.name;\n      songSelected = `Songs that ${d.parent.data.name} say(s) '${d.data.name}'`;\n    } else if (d.depth === 3) {\n      artistSelected = \"Artist: \" + d.parent.parent.data.name;\n      wordSelected = \"Word: \" + d.parent.data.name;\n      songSelected = \"Song: \" + d.data.name;\n    } \n\n    d3.select(\"#selectedAllArtist\")\n      .style(\"font-weight\", d.depth === 0 ? 400 : 200)\n      .style(\"border-left\", d.depth === 0 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(artistSelected ? artistSelected : \"All Artists\");\n\n    d3.select(\"#selectedArtistName\")\n      .style(\"font-weight\", d.depth === 1 ? 400 : 200)\n      .style(\"border-left\", d.depth === 1 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(wordSelected ? wordSelected : \"Words\");\n\n    d3.select(\"#selectedBadWord\")\n      .style(\"font-weight\", d.depth === 2 ? 400 : 200)\n      .style(\"border-left\", d.depth === 2 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(songSelected ? songSelected : \"Songs\");\n\n    d3.select(\"#selectedSong\")\n      .style(\"font-weight\", d.depth === 3 ? 400 : 200)\n      .style(\"border-left\", d.depth === 3 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(\n        d.depth === 3\n          ? `Lyrics in '${d.data.name}' where the word '${d.parent.data.name}' is altered`\n          : \"Lyrics\"\n      );\n  };\n\n  const shouldShowLabel = (d) => {\n    return (d.parent === root && d.r > d.data.name.length * 2) || d.depth > 1;\n  };\n\n  const zoomTo = (v) => {\n    const k = width / v[2];\n    view = v;\n    label.attr(\"transform\", (d) => {\n      return `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`;\n    });\n    node.attr(\n      \"transform\",\n      (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n    );\n    node.attr(\"r\", (d) => d.r * k);\n  };\n\n  const zoom = (event, d) => {\n    focus = d;\n\n    const transition = svg\n      .transition()\n      .duration(event.altKey ? 7500 : 750)\n      .tween(\"zoom\", (d) => {\n        const i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);\n        return (t) => zoomTo(i(t));\n      });\n\n    node\n      .filter(function (d) {\n        return d.parent === focus || this.style.display === \"inline\";\n      })\n      .transition(transition)\n      .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n      .on(\"start\", function (d) {\n        if (d.parent === focus) this.style.display = \"inline\";\n      })\n      .on(\"end\", function (d) {\n        if (d.parent !== focus) this.style.display = \"none\";\n      });\n\n    label\n      .filter(function (d) {\n        return d.parent === focus || this.style.display === \"inline\";\n      })\n      .transition(transition)\n      .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n      .on(\"start\", function (d) {\n        if (shouldShowLabel(d)) this.style.display = \"inline\";\n      })\n      .on(\"end\", function (d) {\n        if (d.parent !== focus) this.style.display = \"none\";\n      });\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await genNestedData();\n      const input = { name: \"artists\", children: res };\n      setRoot(pack(input));\n    };\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!shouldFocus && focus && focus.depth == 2) {\n      closeLyrics()\n    }\n  }, [shouldFocus]);\n\n  /* The useEffect Hook is for running side effects outside of React,\n       for instance inserting elements into the DOM using D3 */\n  useEffect(() => {\n    d3.selectAll(\"g > *\").remove();\n\n    if (root && d3Container.current) {\n      focus = root;\n\n      // viz container\n      svg = d3\n        .select(d3Container.current)\n        .attr(\"viewBox\", `-${width / 2} -${height / 2} ${width} ${height}`)\n        .style(\"display\", \"block\")\n        .style(\"height\", \"80vh\")\n        .style(\"margin\", \"0 -14px\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (event) => {\n          if (focus !== root) {\n            if (d3.select(\"#lyrics\").style(\"z-index\") > 0) {\n              // Hide lyrics when escape button pushed\n              closeLyrics();\n            } else {\n              updateArtistTitle(focus.parent, true);\n              zoom(event, focus.parent);\n            }\n          }\n        });\n\n      // glow\n      const defs = svg.append(\"defs\");\n      const filter = defs.append(\"filter\").attr(\"id\", \"glow\");\n      filter\n        .append(\"feGaussianBlur\")\n        .attr(\"stdDeviation\", \"2\")\n        .attr(\"result\", \"coloredBlur\");\n      const feMerge = filter.append(\"feMerge\");\n      feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\n      feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n      // circle nodes\n      node = svg\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(root.descendants().slice(1))\n        .join(\"circle\")\n        .attr(\"stroke\", (d) => {\n          if (typeof color[d.depth] === \"function\") {\n            return color[d.depth](d.r);\n          }\n        })\n        .attr(\"fill\", \"transparent\")\n        .style(\"display\", (d) => (d.parent === root ? \"inline\" : \"none\"))\n        .on(\"mouseover\", (e, d) => {\n          d3.select(e.target)\n            .attr(\"stroke-width\", 4)\n            .style(\"filter\", \"url(#glow)\");\n          if (!shouldShowLabel(d)) {\n            d3.select(\"#tooltip\")\n              .transition()\n              .duration(200)\n              .style(\"opacity\", 1)\n              .text(d.data.name);\n          }\n        })\n        .on(\"mousemove\", (e) => {\n          d3.select(\"#tooltip\")\n            .style(\"left\", e.pageX + 10 + \"px\")\n            .style(\"top\", e.pageY - 10 + \"px\");\n        })\n        .on(\"mouseout\", (e) => {\n          d3.select(e.target).attr(\"stroke-width\", 1).style(\"filter\", null);\n          d3.select(\"#tooltip\").transition().duration(200).style(\"opacity\", 0);\n        })\n        .on(\"click\", (event, d) => {\n          if (focus !== d) {\n            updateArtistTitle(d, true);\n\n            // Only zoom until you get to song level. Then reveal bad words in each song.\n            if (d.depth < 3) {\n              zoom(event, d);\n            } else if (d.depth === 3) {\n              generateLyricPopup(d.data);\n            }\n            event.stopPropagation();\n          }\n        });\n\n      // labels\n      label = svg\n        .append(\"g\")\n        .attr(\"pointer-events\", \"none\")\n        .attr(\"text-anchor\", \"middle\")\n        .selectAll(\"text\")\n        .data(root.descendants())\n        .join(\"text\")\n        .style(\"font\", (d) => (d.depth === 1 ? \"8px Lato\" : \"12px Lato\"))\n        .style(\"fill\", \"white\")\n        .style(\"fill-opacity\", (d) => (d.parent === root ? 1 : 0))\n        .style(\"display\", (d) => (shouldShowLabel(d) ? \"inline\" : \"none\"))\n        .text((d) => (!d.children ? d.data.songName : d.data.name));\n\n      // tooltip\n      d3.select(\"body\")\n        .append(\"div\")\n        .attr(\"id\", \"tooltip\")\n        .attr(\"style\", \"position: absolute; opacity: 0;\")\n        .style(\"color\", \"white\")\n        .style(\"background-color\", \"#334e68bb\")\n        .style(\"padding\", \"8px\")\n        .style(\"border-radius\", \"4px\");\n\n      // description text\n      d3.select(\"#selectedAllArtist\")\n        .style(\"font-weight\", \"400\")\n        .style(\"border-left\", \"var(--light-green) solid 2px\");\n\n      // Lyric breakdown\n      d3.select(\"#svg-container\")\n        .append(\"div\")\n        .attr(\"id\", \"lyrics\")\n        .style(\"z-index\", \"-10\")\n        .style(\"position\", \"fixed\")\n        .style(\"opacity\", \"0\")\n        .style(\"pointer-events\", \"none\")\n        .style(\"width\", \"40vw\")\n        .style(\"height\", \"60vh\")\n        .style(\"left\", \"50%\")\n        .style(\"top\", \"50%\")\n        .style(\"overflow\", \"auto\")\n        .style(\"color\", \"var(--light-text)\")\n        .style(\"font\", \"16px Lato\")\n        .style(\"background-color\", \"var(--dark-secondary)\")\n        .style(\"padding\", \"24px\")\n        .style(\"border-radius\", \"12px\")\n        .style(\"transform\", \"translate(-50%, -50%)\");\n\n      d3.select(\"#lyrics\")\n        .append(\"button\")\n        .style(\"position\", \"absolute\")\n        .style(\"right\", \"12px\")\n        .style(\"top\", \"12px\")\n        .text(\"x\")\n        .on(\"click\", () => {\n          // Close lyric pop-up\n          closeLyrics();\n        });\n\n      d3.select(\"#lyrics\")\n        .append(\"h2\")\n        .style(\"margin-top\", 0)\n        .style(\"text-align\", \"center\")\n        .attr(\"id\", \"lyrics-title\");\n\n      d3.select(\"#lyrics\")\n        .append(\"p\")\n        .style(\"text-align\", \"center\")\n        .attr(\"id\", \"lyrics-year\");\n\n      d3.select(\"#lyrics\").append(\"div\").attr(\"id\", \"lyrics-content\");\n\n      // esc key zooms out\n      zoomTo([root.x, root.y, root.r * 2]);\n      document.addEventListener(\"keydown\", handleEscape);\n\n      return () => {\n        document.removeEventListener(\"keydown\", handleEscape);\n      };\n    }\n  }, [root]);\n\n  const closeLyrics = () => {\n    d3.select(\"#lyrics\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 0)\n      .style(\"z-index\", -10)\n      .style(\"pointer-events\", \"none\");\n    updateArtistTitle(focus, false);\n  };\n\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\") {\n      if (d3.select(\"#lyrics\").style(\"z-index\") > 0) {\n        // Hide lyrics when escape button pushed\n        closeLyrics();\n      } else if (focus !== root) {\n        updateArtistTitle(focus.parent, true);\n        zoom(e, focus.parent);\n      }\n    }\n  };\n\n  const generateLyricRow = (data) => {\n    let ogHeader = `<b>${data.ogArtist}</b><br />`;\n    let ogLyricHTML =\n      '<div class=\"Bubbles-ogLyric\">' + data.ogLyricHTML + \"</div>\";\n\n    let kbHeader = \"<b style='float:right'>Kidz Bop</b><br />\";\n    let kbLyricHTML =\n      '<div class=\"Bubbles-kbLyric\">' + data.kbLyricHTML + \"</div>\";\n\n    return (\n      \"<div style='width:45%'>\" +\n      ogHeader +\n      ogLyricHTML +\n      \"</div>\" +\n      \"<div class='Bubbles-arrow'>\\u2192</div>\" +\n      \"<div style='width:45%'>\" +\n      kbHeader +\n      kbLyricHTML +\n      \"</div>\"\n    );\n  };\n\n  // Function to transform data into HTML content\n  const generateLyricPopup = (data) => {\n    // Merge all lyrics together\n    const innerHTML = data.children\n      .map((child) => {\n        return (\n          '<div class=\"Bubbles-lyricRow\">' + generateLyricRow(child) + \"</div>\"\n        );\n      })\n      .join(\"\");\n\n    let { songName, ogArtist, year } = data.children[0];\n    const songTitle = songName + \" by \" + ogArtist;\n    const releasedYear = \"Released in \" + year + \".\";\n\n    // Fill in title of lyric popup\n    d3.select(\"#lyrics-title\")\n      .style(\"font-weight\", \"bold\")\n      .style(\"margin-bottom\", 0)\n      .text(songTitle);\n\n    // Fill in year of lyric popup\n    d3.select(\"#lyrics-year\")\n      .style(\"margin-top\", 0)\n      .style(\"margin-bottom\", \"8px\")\n      .text(releasedYear);\n\n    // Fill in content of lyric popup\n    d3.select(\"#lyrics-content\").html(innerHTML);\n\n    // Reveal lyric popup\n    d3.select(\"#lyrics\")\n      .transition()\n      .duration(200)\n      .style(\"z-index\", 10)\n      .style(\"opacity\", 1)\n      .style(\"pointer-events\", \"all\");\n  };\n\n  useEffect(() => {\n    if (songOrArtist && root) {\n      const newFocus = root\n        .descendants()\n        .filter((d) => d.data.name === songOrArtist.value)[0];\n      if (newFocus) {\n        zoom({}, newFocus);\n        updateArtistTitle(newFocus, false);\n      }\n    }\n  }, [songOrArtist, root, zoom]);\n\n  return (\n    <>\n      <div>\n        <h3 className=\"Bubbles-layer\" id=\"selectedAllArtist\">All Artists</h3>\n        <h3 className=\"Bubbles-layer\" id=\"selectedArtistName\">Words</h3>\n        <h3 className=\"Bubbles-layer\" id=\"selectedBadWord\">Songs</h3>\n        <h3 className=\"Bubbles-layer\" id=\"selectedSong\">Lyrics</h3>\n      </div>\n      <div id=\"svg-container\" style={{width: \"100%\"}}>\n      <svg\n        className=\"d3-component\"\n        width=\"100%\"\n        height=\"100%\"\n        ref={d3Container}\n      />\n      </div>\n    </>\n  );\n};\n\nexport default Bubbles;\n","import * as d3 from \"d3\";\n\nexport const genRawData = async () => {\n  return await d3.csv(\n    \"https://raw.githubusercontent.com/the-pudding/data/master/kidz-bop/KB_censored-lyrics.csv\"\n  );\n};\n\nexport const genNestedData = async () => {\n  const csvData = await genRawData();\n  let groupedByArtist = Array.from(d3.group(csvData, (d) => d.ogArtist)).map(\n    (item) => {\n      let groupedByBadword = Array.from(\n        d3.group(item[1], (d) => d.badword)\n      ).map((word) => {\n        let groupedBySong = Array.from(\n          d3.group(word[1], (d) => d.songName)\n        ).map((song) => { \n          // Remove repeated lyrics\n          let groupedByLyric = Array.from(\n            d3.group(song[1], (d) => d.ogLyric)\n          ).map((uniqueLyricGroup) => {\n            // uniqueLyricGroup = is a size-2 array with lyric and index 0 and array of data points at index 1\n            let dataEntries = uniqueLyricGroup[1];\n            let firstUniqueEntry = dataEntries[0];\n            const { ogLyric, kbLyric, badword } = firstUniqueEntry;\n            \n            let { kbLyricHTML, ogLyricHTML } = compareLyrics(badword, ogLyric, kbLyric);\n            return { ...firstUniqueEntry, kbLyricHTML: kbLyricHTML, ogLyricHTML: ogLyricHTML}\n          })\n          return { name: song[0], children: groupedByLyric };\n        });\n        return { name: word[0], children: groupedBySong };\n      });\n      return { name: item[0], children: groupedByBadword };\n    }\n  );\n\n  return groupedByArtist;\n};\n\nexport const genArtists = async () => {\n  const csvData = await genRawData();\n  const artistList = Array.from(d3.group(csvData, d => d.ogArtist))\n    .map((artist) => { \n      return { label: artist[0], value: artist[0], type: \"artist\" }\n    })\n    .sort((a, b) => a.label.localeCompare(b.label));\n  return artistList;\n};\n\nexport const genSongs = async () => {\n  const csvData = await genRawData();\n  const songList = Array.from(d3.group(csvData, d => d.songName))\n    .map((song) => { \n      return { label: song[0], value: song[0], type: \"song\" }\n    })\n    .sort((a, b) => a.label.localeCompare(b.label));\n  return songList;\n};\n\n\nconst compareLyrics = (badword, ogLyric, kbLyric) => {\n\n  let ogLyricParsed = ogLyric.split(\" \");\n  let ogLyricObj = convertArrayToJSON(ogLyricParsed);\n  let ogLyricHTML = getFormattedOGLyricAsHTML(ogLyricParsed, badword);\n\n  let kbLyricParsed = kbLyric.split(\" \");\n  let kbLyricHTML = ( kbLyric === \"cuts verse\" ) ? \"<i>cuts verse</i>\" : getFormattedKBLyricAsHTML(ogLyricObj, kbLyricParsed);\n\n  return { 'kbLyricHTML': \"<span>\" + kbLyricHTML + \"</span>\", 'ogLyricHTML' : \"<span>\" + ogLyricHTML + \"</span>\" };\n}\n\nconst punctuationless = (s) => s.replace(/[^A-Za-z0-9]/g, \"\").toLowerCase();\n\nconst convertArrayToJSON = (arr) => Object.assign(...arr.map((k) => ({ [punctuationless(k)]: 0 })));\n\nconst getFormattedOGLyricAsHTML = (ogLyricWordArray, badword) => {\n  return ogLyricWordArray.map((ogWord) => {\n    return \"<span class='ogLyric-\" + (ogWord.toLowerCase().includes(badword) ? 'bad' : 'good') + \"'>\" + ogWord + \"</span>\";\n  }).join(\" \");\n}\n\nconst getFormattedKBLyricAsHTML = (ogLyricWordObj, kbLyricWordArray) => {\n  let prev = true; // true if same, false if altered\n  return kbLyricWordArray.map((kbWord, i) => {\n    \n    // Check if KB Word exists in OG Lyric\n    let kbWordInOGLyric = ogLyricWordObj[punctuationless(kbWord)] !== undefined;\n\n    if( kbWordInOGLyric ){\n      // Word is in both OG and KB Lyric\n      // if prev word was a altered lyric, close the span\n      let prefix = !prev \n        ? \"</span><span class='kblyric-same start'>\" \n        : \"<span class='kblyric-same'>\"\n      prev = true\n      return prefix + kbWord + \"</span> \";\n      \n    } else {\n      // kbWord is not in og lyric\n      // CHANGE\n      // if it is the last word in the word array, close the span if the previous word is a altered word\n      let suffix = !prev && kbLyricWordArray.length - 1 == i ? \"</span>\" : \"\"\n      // if the previous word is a different word, don't start the span\n      let prefix = prev ? \"<span class='kblyric-different'>\" : \"\"\n      prev = false\n      return prefix + kbWord + suffix;\n    }\n  }).join(\" \");\n\n}","import * as d3 from \"d3\";\n\n// svg colors + dims\nexport const width = 500;\nexport const height = 500;\nexport const pack = (data) =>\n  d3.pack().size([width, height]).padding(3)(\n    d3\n      .hierarchy(data)\n      .sum((d) => d.count)\n      .sort((a, b) => b.count - a.count)\n  );\n","import React, { useState, useEffect } from 'react';\nimport Select from \"react-select\";\nimport { genArtists } from \"../utils/data-transform\";\nimport Bubbles from '../Bubbles.js';\nimport \"../App.css\";\n\nconst customStyles = {\n  control: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--light-text)\",\n    border: \"none\",\n    borderRadius: \"0\",\n    borderBottom: \"2px solid var(--light-green)\",\n    boxShadow: \"none\",\n    \"&:hover\": {\n      borderBottom: \"2px solid var(--blue)\",\n    },\n  }),\n  placeholder: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--dark-text)\",\n  }),\n  singleValue: (base) => ({\n    ...base,\n    color: \"var(--light-text)\",\n  }),\n  indicatorSeparator: () => ({\n    display: \"none\",\n  }),\n  dropdownIndicator: (base) => ({\n    ...base,\n    color: \"var(--light-green)\",\n    \"&:hover\": {\n      color: \"var(--blue)\",\n    },\n  }),\n  input: (base) => ({\n    ...base,\n    color: \"var(--light-text)\",\n  }),\n  menu: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--light-text)\",\n  }),\n  option: (base, state) => ({\n    ...base,\n    fontSize: \"16px\",\n    color: \"var(--light-text)\",\n    backgroundColor: state.isSelected\n      ? \"var(--blue)\"\n      : state.isFocused\n      ? \"var(--dark-green)\"\n      : \"var(--dark)\",\n  }),\n};\n\n\nconst BubbleStep = ({shouldFocus}) => {\n\n  const [songOrArtist, setSongOrArtist] = useState(null);\n  const [artists, setArtists] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const artistRes = await genArtists();\n      setArtists(artistRes);\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <div>\n      <div className=\"App-escape\">press ESC to zoom out</div>\n      <div className=\"App-header\">\n        What's\n        <Select\n          className=\"App-select\"\n          autoFocus={shouldFocus}\n          placeholder=\"your favorite artist\"\n          options={[...artists]}\n          value={songOrArtist}\n          onChange={setSongOrArtist}\n          styles={customStyles}\n        />\n        spitting?\n      </div>\n      <div className=\"App-header\">\n        <Bubbles shouldFocus={shouldFocus} songOrArtist={songOrArtist} setSongOrArtist={setSongOrArtist} />\n      </div>\n      <div className=\"App-data\">data from The Pudding (https://github.com/the-pudding/data/tree/master/kidz-bop)</div>\n    </div>\n  );\n\n}\n\nexport default BubbleStep","export default __webpack_public_path__ + \"static/media/demo0.b37bdfc9.gif\";","export default __webpack_public_path__ + \"static/media/demo1.cf4fdfdd.gif\";","export default __webpack_public_path__ + \"static/media/demo2.c3f91497.gif\";","export default __webpack_public_path__ + \"static/media/demo3.d3482ee8.gif\";","import \"./StorySteps.css\";\nimport Demo0 from \"../gifs/demo0.gif\";\nimport Demo1 from \"../gifs/demo1.gif\";\nimport Demo2 from \"../gifs/demo2.gif\";\nimport Demo3 from \"../gifs/demo3.gif\";\n\nexport const IntroStep = () => (\n  <div className=\"IntroStep\">\n    <div className=\"header\">Adultz Bopz</div>\n    <div className=\"desc\">\n      An interactive data visualization tool to understand how Kidz Bop alters\n      or censors pop music for kids.\n    </div>\n  </div>\n);\n\nexport const Step1 = () => (\n  <div style={{ marginLeft: \"15vw\", textAlign: \"left\" }}>\n    <h2 className=\"header\">Not to burst your bubble, but ...</h2>\n  </div>\n);\n\nexport const Step2 = () => (\n  <div style={{ margin: \"0 15vw\", textAlign: \"left\" }}>\n    <h2 className=\"header\">How It Works</h2>\n    <p className=\"Step2-p\">\n      All the songs by a certain artist are grouped together in a bubble with a\n      label of their name. For smaller artists, you can hover over their bubble\n      to see which artist it is.\n    </p>\n    <p className=\"Step2-p\">\n      Clicking on an artists bubble takes you inside to show all the songs by a\n      certain artist grouped by their altered or censored word.\n    </p>\n    <p className=\"Step2-p\">\n      Clicking on an word bubble all the songs from that artist with the bad\n      word you clicked.\n    </p>\n    <p className=\"Step2-p\">\n      You can click on each song to reveal the original and Kids Bop lyrics.\n    </p>\n  </div>\n);\n\nexport const Step2a = () => (\n  <div className='Step2'>\n    <h2 className=\"Step2-p\">\n      All the songs by a certain artist are grouped together in a bubble with a\n      label of their name. For smaller artists, you can hover over their bubble\n      to see which artist it is.\n    </h2>\n    <img className=\"center-image\" src={Demo0} />\n  </div>\n);\n\nexport const Step2b = () => (\n  <div className='Step2'>\n    <h2 className=\"Step2-p\">\n      Clicking on an artists bubble takes you inside to show all the songs by a\n      certain artist grouped by their altered or censored word.\n    </h2>\n    <img className=\"center-image\" src={Demo1} />\n  </div>\n);\n\nexport const Step2c = () => (\n  <div className='Step2'>\n    <h2 className=\"Step2-p\">\n      Clicking on an word bubble shows all the songs from that artist with the\n      censored word you clicked.\n    </h2>\n    <img className=\"center-image\" src={Demo2} />\n  </div>\n);\n\nexport const Step2d = () => (\n  <div className='Step2'>\n    <h2 className=\"Step2-p\">\n      You can click on each song to reveal the original and Kids Bop lyrics.\n    </h2>\n    <img className=\"center-image\" src={Demo3} />\n  </div>\n);\n","import { useState } from \"react\";\nimport \"./App.css\";\nimport { Scrollama, Step } from 'react-scrollama'\nimport BubbleStep from \"./steps/BubbleStep\";\nimport { IntroStep, Step2a, Step2b, Step2c, Step2d } from './steps/StorySteps';\n\nexport const VIEW_ALL_OPTION = {\n  label: \"your favorite artist\",\n  value: \"all\",\n  type: \"all\",\n};\n\nconst App = () => {\n  const [currentStepIndex, setCurrentStepIndex] = useState(null);\n\n  const onStepEnter = ({ data }) => {\n    setCurrentStepIndex(data);\n  };\n\n  return (\n    <div className=\"App\">\n      <Scrollama onStepEnter={onStepEnter}>\n        <Step\n          data={0}\n          key={0}\n          style={{\n            opacity: currentStepIndex === 0 ? 1 : 0.2,\n          }}\n        >\n          <div className=\"App-step\">\n            <IntroStep />\n          </div>\n        </Step>\n        {/*\n        <Step data={1} key={1}>\n          <Step1 currentStepIndex={currentStepIndex} data={1}/>\n        </Step> */}\n        <Step data={2} key={2}>\n          <div\n            className=\"App-step\"\n            style={{\n              opacity: currentStepIndex === 2 ? 1 : 0.2,\n            }}\n          >\n            <Step2a />\n          </div>\n        </Step>\n        <Step data={3} key={3}>\n          <div\n            className=\"App-step\"\n            style={{\n              opacity: currentStepIndex === 3 ? 1 : 0.2,\n            }}\n          >\n            <Step2b />\n          </div>\n        </Step>\n        <Step data={4} key={4}>\n          <div\n            className=\"App-step\"\n            style={{\n              opacity: currentStepIndex === 4 ? 1 : 0.2,\n            }}\n          >\n            <Step2c />\n          </div>\n        </Step>\n        <Step data={5} key={5}>\n          <div\n            className=\"App-step\"\n            style={{\n              opacity: currentStepIndex === 5 ? 1 : 0.2,\n            }}\n          >\n            <Step2d />\n          </div>\n        </Step>\n        <Step data={6} key={6}>\n          <div\n            className=\"App-step\"\n            style={{\n              padding: 0,\n              opacity: currentStepIndex === 6 ? 1 : 0.2,\n            }}\n          >\n            <BubbleStep shouldFocus={currentStepIndex === 6} />\n          </div>\n        </Step>\n      </Scrollama>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}